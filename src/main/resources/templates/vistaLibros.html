<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/styles/estilos.css}">
    <title>Ejercicio 2</title>
</head>
<body>
    <h1>Libros para añadir</h1>
    <div id="listado_aniadir">
        <a th:href="@{/add(titulo='Los miserables',autor='Víctor Hugo')}"><button class="button__grande">Los miserables</button></a>
        <a th:href="@{/add(titulo='Ensayo sobre la ceguera',autor='José Saramago')}"><button class="button__grande">Ensayo sobre la ceguera</button></a>
        <a th:href="@{/add(titulo='1984',autor='George Orwell')}"><button class="button__grande">1984</button></a>
        <a th:href="@{/add(titulo='Cementerio de animales',autor='Stepehen King')}"><button class="button__grande">Cementerio de animales</button></a>
    </div>
    <form th:action="@{/}" method="get">
        <label for="busquedaTitulo">Búsqueda por título:  </label><input type="text" name="filtroTitulo" id="busquedaTitulo" placeholder="Inserte el título">
        <button type="submit">Buscar por título</button>
    </form>
    <form th:action="@{/}" method="get">
        <label for="busquedaAutor">Búsqueda por autor:  </label><input type="text" name="filtroAutor" id="busquedaAutor" placeholder="Inserte el autor">
        <button type="submit">Buscar por autor</button>
    </form>

    <div id="barra_filtrado">
        <a th:href="@{/(disponibles=false)}"><button class="button__grande">Mostar prestados</button></a>
        <a th:href="@{/(disponibles=true)}"><button class="button__grande">Mostrar disponibles</button></a>
        <a th:href="@{/}"><button class="button__grande">Mostrar todos</button></a>
    </div>

    <h1>Listado de libros</h1>
    <div id="mensaje" th:if="${mensaje}!=null" th:text="${mensaje}"></div>
    <table>
        <tr>
            <th>TITULO</th>
            <th>AUTOR</th>
            <th>PRESTADO</th>
            <th>ELIMINAR</th>
            <th>CAMBIAR ESTADO</th>
        </tr>
        <tr th:each="l : ${libros}" th:classappend="${l.prestado}?'tr__color':''">
            <td th:text="${l.titulo}"></td>
            <td th:text="${l.autor}"></td>
            <td th:text="${l.prestado}?'Prestado':'Disponible'"></td>
            <td><a th:href="@{/delete/{id}(id=${l.id})}"><button>Eliminar</button></a></td>
            <td><a th:href="@{/toggle/{id}(id=${l.id})}"><button>Cambiar</button></a></td>
        </tr>
    </table>
</body>
</html>